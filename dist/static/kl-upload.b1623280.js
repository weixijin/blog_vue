import{n as p,h as c}from"./index.25833e42.js";var d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"kl-progress-cover-1"},[s("div",{staticClass:"kl-progress"},[s("div",{staticClass:"progress-num",style:{width:e.width}})]),s("span",[e._v(e._s(Math.floor(e.value))+"%")])])},u=[];const _={components:{},props:{value:{type:Number,default:0}},computed:{width(){return this.value+"%"}},data(){return{}},methods:{}},n={};var f=p(_,d,u,!1,h,"51f61130",null,null);function h(e){for(let t in n)this[t]=n[t]}var v=function(){return f.exports}(),m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"demo"},[s("p",{staticClass:"upload-tip"},[e._v("\u652F\u6301\u4E0A\u4F20"+e._s(e.allTypes.join("\u3001"))+"\u7684\u8D44\u6599\uFF0C100M\u4EE5\u5185")]),s("div",{},[s("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:e.isMultiple,action:"","show-file-list":!1,"auto-upload":!1,"on-change":e.UploadNetdist}},[s("i",{staticClass:"el-icon-upload"}),s("div",{staticClass:"el-upload__text"},[e._v(" \u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C\u6216 "),s("em",[e._v("\u70B9\u51FB\u4E0A\u4F20")])])])],1),s("div",{staticClass:"kl-bar filelist-cover"},[e.isShowPreFile?s("transition-group",{attrs:{name:"filelist"}},e._l(e.fileOptions,function(i,l){return s("div",{key:i.id,staticClass:"file-item-11"},[s("div",{staticClass:"file-item-1"},[s("p",{staticClass:"ell-1"},[e._v(" "+e._s(l+1)+". \xA0 "+e._s(i.file_name)+" ")]),s("i",{staticClass:"el-icon-error",on:{click:function(r){return e.delFile(i)}}})]),s("kl-progress",{model:{value:i.progress,callback:function(r){e.$set(i,"progress",r)},expression:"item.progress"}})],1)}),0):e._e()],1),e.isShowPreImg?s("transition-group",{staticClass:"flex-imgs",attrs:{name:"filelist"}},e._l(e.fileOptions,function(i){return s("div",{key:i.id,staticClass:"file-item"},[s("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:i.preUrl,"preview-src-list":[i.preUrl]}}),s("i",{staticClass:"el-icon-error",on:{click:function(l){return e.delFile(i)}}})],1)}),0):e._e()],1)},g=[];const y={components:{klProgress:v},props:{isShowPreFile:{type:Boolean,default:!1},isShowPreImg:{type:Boolean,default:!1},isMultiple:{type:Boolean,default:!0},allTypes:{type:Array,default:()=>["jpg","png","jpeg","webp","html","js","zip","rar","css","docx","pdf","xlsx","pptx","txt","doc","xls","ppt"]}},data(){return{fileOptions:[],aliyunOssToken:null,uploadPercent:0,showProgress:!1,showProgress:!1,uploadPercent:0}},methods:{init(){this.fileOptions=[]},delFile({id:e}){this.$confirm("\u786E\u5B9A\u5220\u9664\u5417?").then(()=>{this.fileOptions=this.fileOptions.filter(t=>t.id!==e)}).catch()},async UploadNetdist(e){let t=this.isFileSize(e.raw,50);if(t){this.$message.error(t);return}if(t=this.isFileType(e.raw,this.allTypes),t){this.$message.error(t);return}const s=e.raw.name;if(this.fileOptions.findIndex(a=>a.file_name===s)>-1){this.$message.error(`${s}\u6587\u4EF6\u5DF2\u5B58\u5728\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9`);return}let l=new FormData;l.append("file",e.raw),l.append("file_size",e.raw.size);let r=this.$klLoading();c.postNetdist(l).then(a=>{this.$message.success(`${s}\u4E0A\u4F20\u6210\u529F`),this.fileOptions.push({id:this.createId(),file_name:s,file_url:"",progress:100}),this.$emit("success",{row:this.fileOptions})}).catch().finally(()=>{r.close()})},handleUpload(){this.$refs.putRef.$children[0].handleClick()}}},o={};var $=p(y,m,g,!1,x,"2132be68",null,null);function x(e){for(let t in o)this[t]=o[t]}var C=function(){return $.exports}();export{C as default};
