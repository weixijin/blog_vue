import{j as c,t as o,n,u as d}from"./index.25833e42.js";var u=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"flex-wrap"},[e("div",{staticClass:"left-list"},[e("div",{staticClass:"h-40 flex-center-wrap"},[e("el-input",{staticClass:"w-300",attrs:{clearable:""},model:{value:t.keyWords,callback:function(s){t.keyWords=s},expression:"keyWords"}}),e("router-link",{attrs:{to:"/"}},[e("el-button",{attrs:{type:"success"}},[t._v("\u9996\u9875")])],1)],1),e("div",{staticClass:"left-scroll"},t._l(t.filterList,function(s){return e("div",{key:s._id,class:["left-item flex-wrap flex-justify-between",t.currentRow._id===s._id?"bg-primary c-fff":""],attrs:{id:"blog"+s._id},on:{click:function(r){return t.openPrevew(s)}}},[e("span",[t._v(" "+t._s(s.article_name)+" ")]),t.isAdmin&&s.article_ac_url.startsWith("/animation")?e("i",{staticClass:"el-icon-edit m-l-10 f-20 c-primary",on:{click:function(r){return r.stopPropagation(),t.openD(s)}}}):t._e()])}),0)]),e("div",{staticClass:"right-prevew"},[e("div",{staticClass:"h-30 p-l-10 flex-center-wrap"},[e("div",[t._v(" "+t._s(t.currentRow.article_ac_url)+" ")]),e("el-button",{staticClass:"m-l-30",attrs:{type:"primary",size:"mini"},on:{click:t.newWP}},[t._v(" \u9875\u9762\u6253\u5F00 ")])],1),t.currentRow.article_ac_url?e("iframe",{attrs:{src:this.$baseURL+`${t.currentRow.article_ac_url.replace("/^//","")}`}}):t._e()]),e("e-dialog",{attrs:{width:"500px"},on:{confirm:t.confirmD},model:{value:t.visable,callback:function(s){t.visable=s},expression:"visable"}},[e("div",{staticClass:"p-10"},[e("div",{staticClass:"flex-center-wrap"},[e("div",{staticClass:"d-label flex-0 w-80"},[t._v("\u540D\u5B57\uFF1A")]),e("el-input",{model:{value:t.dRow.article_name,callback:function(s){t.$set(t.dRow,"article_name",s)},expression:"dRow.article_name"}})],1),e("div",{staticClass:"m-t-10 flex-center-wrap flex-justify-end"},[e("el-button",{attrs:{type:"danger"},on:{click:t.del}},[t._v("\u76F4\u63A5\u5220\u9664")])],1)])])],1)},_=[];const p={props:{list:{type:Array,default:()=>[]},currentRow:{type:Object,default:()=>({})}},data(){return{keyWords:"",oldRow:{},dRow:{},visable:!1}},computed:{...Vuex.mapGetters(["isAdmin"]),filterList(){return this.list.filter(t=>t.article_name&&t.article_name.includes(this.keyWords))}},watch:{currentRow(t){this.scrollEvent(t)},list:{handler(t){},immediate:!0,deep:!0}},methods:{newWP(){window.open(this.$baseURL+`${this.currentRow.article_ac_url.replace("/^//","")}`)},reset(){this.$emit("init",1)},del(){this.$confirm("\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u8BE5\u6587\u4EF6, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{c({_id:this.currentRow._id}).then(()=>{this.visable=!1,this.$message({type:"success",message:"\u5220\u9664\u6210\u529F!"}),this.$emit("del",this.currentRow._id)}).catch(()=>{})}).catch(()=>{})},back(){this.$emit("change",{page:"list",row:{}})},async scrollEvent(t){await this.$nextTick();const i=document.getElementById("blog"+t._id);i&&i.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},confirmD(){let{dRow:{_id:t,article_ac_url:i,article_name:e}}=this;if(!e){this.$message.error("\u540D\u5B57\u4E0D\u80FD\u4E3A\u7A7A");return}o({my_type:"ac",_id:t,article_ac_url:i,article_name_new:e}).then(r=>{this.visable=!1,this.$emit("update",r.data.data)}).catch(r=>{})},openD(t){this.dRow=this.deepCopy(t),this.oldRow=this.deepCopy(t),this.visable=!0},openPrevew(t){this.$emit("select",t)}}},a={};var h=n(p,u,_,!1,v,"0969926b",null,null);function v(t){for(let i in a)this[i]=a[i]}var f=function(){return h.exports}(),m=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"ac-home"},[e(t.page,{tag:"component",attrs:{list:t.list,currentRow:t.currentRow},on:{update:t.update,change:t.change,init:t.init,del:t.del,select:t.select}})],1)},w=[];const y={components:{prevewList:f},data(){return{page:"prevewList",pageOption:{page:1,limit:1e4,total:0},list:[],currentRow:{}}},created(){this.init()},methods:{select(t){this.currentRow=t},update(t){this.list=this.list.map(i=>i._id===t._id?t:i),this.currentRow=t},del(t){let i=this.list.findIndex(e=>e._id===t);this.list=this.list.filter(e=>e._id!==t),this.list[i]?this.currentRow=this.list[i]:this.currentRow=this.list[0]||{}},change({page:t,row:i}){this.page=t,this.row=i},async init(t=1){const i={ac_type:1,cache:!0,expire_time:864e5};t===1&&(i.expire_time=-1),d(i).then(e=>{e.data&&this.isArray(e.data.list)&&(this.list=e.data.list,this.pageOption.total=this.list.length,this.list.length&&(this.currentRow=this.list[0]))}).catch(e=>{})}}},l={};var R=n(y,m,w,!1,x,null,null,null);function x(t){for(let i in l)this[i]=l[i]}var b=function(){return R.exports}();export{b as default};
