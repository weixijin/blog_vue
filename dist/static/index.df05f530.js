import{_ as n,n as m}from"./index.25833e42.js";import{g as o}from"./gameitem.72ca0066.js";import{k as g,l as u,m as _}from"./data.d27333a2.js";var l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"grid-list"},e._l(e.list,function(a){return r("gameItem",{key:a._id,attrs:{row:a},on:{commandFun:e.commandFun,goGamePage:function(s){return e.goGamePage(a)}}})}),1)},d=[];const c={components:{gameItem:o,uploadImg:()=>n(()=>import("./index.b8868fb6.js"),["static/index.b8868fb6.js","static/index.0ad228ed.css","static/index.f1952ffe.js","static/index.25833e42.js","static/index.8776284e.css","static/index.ae35e4fd.js","static/index.3b888b75.css"])},data(){return{options:[],list:[],isShow:!1,rowForm:{_id:"",game_name:"",game_content:"",game_img:"",status:"1",path:"",im_romm_id:""},rules:{game_name:[{required:!0,message:"\u8BF7\u8F93\u5165\u6E38\u620F\u540D\u79F0",trigger:"blur"},{min:1,max:100,message:"\u957F\u5EA6\u5728 1 \u5230 100 \u4E2A\u5B57\u7B26",trigger:"blur"}],game_content:[{required:!0,message:"\u8BF7\u8F93\u5165\u6E38\u620F\u63CF\u8FF0",trigger:"blur"},{min:1,max:1e3,message:"\u957F\u5EA6\u5728 1 \u5230 1000 \u4E2A\u5B57\u7B26",trigger:"blur"}],path:[{required:!0,message:"\u8BF7\u8F93\u5165\u6E38\u620F\u5730\u5740",trigger:"blur"},{min:1,max:100,message:"\u957F\u5EA6\u5728 1 \u5230 100 \u4E2A\u5B57\u7B26",trigger:"blur"}]}}},created(){this.init()},computed:{...Vuex.mapState(["userdata","userTags"]),...Vuex.mapGetters(["isAdmin"]),dTitle(){return this.rowForm._id?"\u7F16\u8F91\u6E38\u620F":"\u65B0\u589E\u6E38\u620F"}},methods:{goGamePage(e){let{type:t}=e,a={1:"/game/gobandList"}[t]||"";if(!a)return this.$message.warning("\u8FD8\u6CA1\u5F00\u542F");this.goTo(a)},confirm(){let{ruleForm:e}=this.$refs;e&&e.validate(t=>{if(t){let{game_img:r}=this.rowForm;if(!r)return this.$message.warning("\u8BF7\u9009\u62E9\u5C01\u9762\u56FE\u7247"),!1;g(this.rowForm).then(()=>{this.$message.success("\u64CD\u4F5C\u6210\u529F"),this.init()});return}return!1})},openD(){this.isShow=!0},init(){u().then(async e=>{var t;if(e.data&&Array.isArray((t=e==null?void 0:e.data)==null?void 0:t.data)){let r=[];for(let a=0;a<e.data.data.length;a++){const s=e.data.data[a];s.game_img=await this.createCanvasImg({width:200,height:120,fontContent:s.name}).catch(f=>""),s.statusLabel=s.status==1?"\u542F\u7528":"\u7981\u7528",r.push(s)}this.list=r}}).catch(e=>{})},commandFun({type:e,row:t={_id}}){switch(e){case"edit":this.rowForm=this.deepCopy(t),this.isShow=!0;break;case"delete":_({_id}).then(()=>{this.$message.success("\u5220\u9664\u6210\u529F")}).catch(()=>{});break}},closed(){Object.assign(this.rowForm,{_id:"",game_name:"",game_content:"",game_img:"",status:"1",path:"",im_romm_id:""}),this.isShow=!1}}},i={};var h=m(c,l,d,!1,p,"174912e2",null,null);function p(e){for(let t in i)this[t]=i[t]}var x=function(){return h.exports}();export{x as default};
