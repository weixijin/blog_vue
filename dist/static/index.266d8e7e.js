import{n as o}from"./index.25833e42.js";var d=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"demo"},[t("div",{staticClass:"flex-center-wrap"},[t("el-date-picker",{staticClass:"w-100",attrs:{type:"year",placeholder:"\u9009\u62E9\u5E74"},on:{change:e.getList},model:{value:e.form.year,callback:function(i){e.$set(e.form,"year",i)},expression:"form.year"}}),t("el-button",{staticClass:"m-l-10",attrs:{size:e.IS_PC?"":"small",type:"primary"},on:{click:e.openDialog}},[e._v("add")]),t("el-button",{attrs:{type:"success"},on:{click:e.addChange}},[e._v("\u786E\u5B9A")])],1),t("el-tree",{staticClass:"m-t-10",attrs:{data:e.list,"show-checkbox":"","node-key":"_id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(i){var s=i.node,l=i.data;return t("div",{staticClass:"custom-tree-node flex-wrap"},[t("div",{staticClass:"label-width ell-1"},[e._v(e._s(s.label))]),t("div",{staticClass:"m-l-20"},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.openDialog(l)}}},[e._v(" Append ")]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.remove(l)}}},[e._v(" Delete ")])],1)])}}])}),t("e-dialog",{attrs:{width:e.IS_PC?"400px":"300px"},on:{confirm:e.confirmD,closed:e.closed},model:{value:e.visable,callback:function(i){e.visable=i},expression:"visable"}},[t("div",{staticClass:"p-10"},[t("el-input",{model:{value:e.rowData.label,callback:function(i){e.$set(e.rowData,"label",typeof i=="string"?i.trim():i)},expression:"rowData.label"}})],1)])],1)},c=[];const u={components:{},data(){return{form:{year:""},list:[],visable:!1,rowData:{_id:"",label:""}}},computed:{IS_PC(){return this.isPc()}},mounted(){this.init()},methods:{closed(){this.visable=!1,this.rowData={_id:"",label:""}},addChange(){let{year:e}=this.form;e?new Date(e).getFullYear():new Date().getFullYear()},init(){this.getList()},getList(){let{year:e}=this.form;e?new Date(e).getFullYear():new Date().getFullYear()},confirmD(){this.visable=!1;let{_id:e,label:a}=this.rowData,t={_id:this.createId(),label:a,children:[]};if(!e){this.list.push(t);return}this.list=this.list.reduce((i,s)=>(s._id===e&&(Array.isArray(s.children)?s.children.push(t):s.children=[t]),Array.isArray(s.children)&&(s.children=s.children.reduce((l,r)=>(r._id===e&&r.children.push(t),l.push(r),l),[])),i),[])},openDialog(e){this.isObject(e)&&(this.rowData=this.deepCopy(e)),this.visable=!0},remove(e){let{_id:a}=e;this.list=this.list.reduce((t,i)=>(i._id===a||(Array.isArray(i.children)&&(i.children=i.children.reduce((s,l)=>(l._id===a||s.push(l),s),[])),t.push(i)),t),[])}}},n={};var h=o(u,d,c,!1,_,"03082880",null,null);function _(e){for(let a in n)this[a]=n[a]}var f=function(){return h.exports}();export{f as default};
