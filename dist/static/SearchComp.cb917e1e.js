import{n as c}from"./index.25833e42.js";var d=function(){var a=this,o=a.$createElement,l=a._self._c||o;return a.filteredSearchConfig.length>0?l("div",{staticClass:"searchContainer flex-wrap"},[l("el-form",{ref:"secForm",attrs:{model:a.formData,"label-position":a.labelPson},nativeOn:{submit:function(e){e.preventDefault()}}},[a._l(a.filteredSearchConfig,function(e,r){return[e.type==="customAll"&&e.slot?[a._t(e.slot)]:a._e(),e.type==="customInput"?l("el-form-item",{key:r,staticClass:"secForm__item customInput",attrs:{label:e.label}},[a._t(e.slot)],2):a._e(),e.type==="input"||e.type==="password"?l("el-form-item",{key:r,staticClass:"secForm__item",attrs:{label:a.getLabel(e.label),prop:e.modelName}},[l("el-input",{attrs:{placeholder:e.placeholder?e.placeholder:"\u8BF7\u8F93\u5165"+e.label,clearable:!0,disabled:!!e.disabled,"show-password":e.type==="password",maxlength:e.maxLength||9999},on:{clear:function(t){return a.middleSearch(e)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&a._k(t.keyCode,"enter",13,t.key,"Enter")?null:a.middleSearch(e)}},model:{value:a.formData[e.modelName],callback:function(t){a.$set(a.formData,e.modelName,typeof t=="string"?t.trim():t)},expression:"formData[item.modelName]"}})],1):a._e(),e.type==="inputNumber"?l("el-form-item",{key:r,staticClass:"secForm__item",attrs:{label:a.getLabel(e.label),prop:e.modelName}},[l("el-input-number",{staticClass:"search-input-number",attrs:{min:e.min?e.min:0,max:e.max?e.max:1e13,step:e.step?e.step:1,controls:!!e.controls,"controls-position":e.position?e.position:"right",precision:e.precision?e.precision:0,clearable:e.clearable?e.clearable:!1,disabled:!!e.disabled,placeholder:e.disabled?"":e.placeholder?e.placeholder:"\u8BF7\u8F93\u5165"+e.label},model:{value:a.formData[e.modelName],callback:function(t){a.$set(a.formData,e.modelName,t)},expression:"formData[item.modelName]"}})],1):a._e(),e.type==="textarea"?l("el-form-item",{key:r,staticClass:"secForm__item",attrs:{label:a.getLabel(e.label),prop:e.modelName}},[l("el-input",{attrs:{type:e.type,placeholder:e.placeholder?e.placeholder:"\u8BF7\u8F93\u5165"+e.label,disabled:!!e.disabled,autosize:e.autosize?e.autosize:!0},model:{value:a.formData[e.modelName],callback:function(t){a.$set(a.formData,e.modelName,t)},expression:"formData[item.modelName]"}})],1):a._e(),e.type==="select"?l("el-form-item",{key:r,staticClass:"secForm__item",class:e.class,attrs:{label:a.getLabel(e.label),prop:e.modelName}},[e.page?l("PagingSelectComp",{staticStyle:{width:"100%"},attrs:{"select-config":e.pagingConfig},model:{value:a.formData[e.modelName],callback:function(t){a.$set(a.formData,e.modelName,t)},expression:"formData[item.modelName]"}}):l("el-select",{attrs:{"value-key":e.valueKey,multiple:e.isMuli?e.isMuli:!1,clearable:a.getType(e.clearable)==="boolean"?e.clearable:!0,filterable:a.getType(e.isFilter)==="boolean"?e.isFilter:!0,remote:e.isRemote?e.isRemote:!1,"remote-method":e.isRemote?function(t){return a.handleSelectRemote(t,e)}:null,disabled:e.disabled?e.disabled:!1,placeholder:e.placeholder?e.placeholder:"\u8BF7\u9009\u62E9"+e.label,"collapse-tags":e.isCollapse?e.isCollapse:!1},on:{change:function(t){return a.middleSearch(e)}},model:{value:a.formData[e.modelName],callback:function(t){a.$set(a.formData,e.modelName,t)},expression:"formData[item.modelName]"}},a._l(e.options,function(t){return l("el-option",{key:t[e.valueKey],attrs:{disabled:t.disabled?t.disabled:!1,label:t[e.labelKey],value:t[e.valueKey]}})}),1)],1):a._e(),e.type==="selectAll"?l("el-form-item",{key:r,staticClass:"secForm__item",attrs:{label:a.getLabel(e.label),prop:e.modelName}},[l("select-all",{attrs:{placeholder:e.placeholder?e.placeholder:"\u8BF7\u9009\u62E9"+e.label,options:e.options,valueKey:e.valueKey,labelKey:e.labelKey,clearable:!0,multiple:!0,filterable:e.isFilter?e.isFilter:!1,"collapse-tags":e.isCollapse?e.isCollapse:!1},model:{value:a.formData[e.modelName],callback:function(t){a.$set(a.formData,e.modelName,t)},expression:"formData[item.modelName]"}})],1):a._e(),e.type==="cascader"?l("el-form-item",{key:r,staticClass:"secForm__item",attrs:{label:a.getLabel(e.label),prop:e.modelName}},[l("el-cascader",{attrs:{clearable:"",filterable:"",options:e.options,props:e.props,placeholder:e.placeholder?e.placeholder:"\u8BF7\u9009\u62E9"+e.label,"popper-class":e.class},model:{value:a.formData[e.modelName],callback:function(t){a.$set(a.formData,e.modelName,t)},expression:"formData[item.modelName]"}})],1):a._e(),e.type==="radioGroup"?l("el-form-item",{key:r,staticClass:"secForm__item",attrs:{label:a.getLabel(e.label),prop:e.modelName}},[l("el-radio-group",{model:{value:a.formData[e.modelName],callback:function(t){a.$set(a.formData,e.modelName,t)},expression:"formData[item.modelName]"}},[e.radioButton?a._l(e.options,function(t,s){return l("el-radio-button",{key:s,attrs:{label:t.value,disabled:!!t.disabled}},[l("span",{domProps:{textContent:a._s(t.label)}})])}):a._l(e.options,function(t,s){return l("el-radio",{key:s,attrs:{label:t.value,disabled:!!t.disabled}},[l("span",{domProps:{textContent:a._s(t.label)}})])})],2)],1):a._e(),e.type==="checkbox"?l("el-form-item",{key:r,staticClass:"secForm__item",attrs:{label:a.getLabel(e.label),prop:e.modelName}},[l("el-checkbox",{attrs:{disabled:!!e.disabled},model:{value:a.formData[e.modelName],callback:function(t){a.$set(a.formData,e.modelName,t)},expression:"formData[item.modelName]"}},[l("span",{domProps:{textContent:a._s(e.CheckboxText)}})])],1):a._e(),e.type==="checkboxGroup"?l("el-form-item",{key:r,staticClass:"secForm__item",attrs:{label:a.getLabel(e.label),prop:e.modelName}},[l("el-checkbox-group",{attrs:{min:e.min?e.min:0,max:e.max?e.max:1e5},model:{value:a.formData[e.modelName],callback:function(t){a.$set(a.formData,e.modelName,t)},expression:"formData[item.modelName]"}},[e.checkboxButton?a._l(e.options,function(t,s){return l("el-checkbox-button",{key:s,attrs:{label:t.value,disabled:!!t.disabled}},[l("span",{domProps:{textContent:a._s(t.label)}})])}):a._l(e.options,function(t,s){return l("el-checkbox",{key:s,attrs:{label:t.value,disabled:!!t.disabled}},[l("span",{domProps:{textContent:a._s(t.label)}})])})],2)],1):a._e(),e.type==="datePicker"?l("el-form-item",{key:r,staticClass:"secForm__item",attrs:{label:a.getLabel(e.label),prop:e.modelName}},[e.isNeedSeconds?l("el-date-picker",{attrs:{type:"datetime",placeholder:e.placeholder?e.placeholder:"\u8BF7\u8F93\u5165"+e.label,"value-format":e.valueType||"","default-value":e.defaultValue?e.defaultValue:"","picker-options":e.pickerOptions},model:{value:a.formData[e.modelName],callback:function(t){a.$set(a.formData,e.modelName,t)},expression:"formData[item.modelName]"}}):l("el-date-picker",{attrs:{type:`${e.isNeedMonth?"month":"date"}`,placeholder:e.placeholder?e.placeholder:"\u8BF7\u8F93\u5165"+e.label,"value-format":e.valueType||"","default-value":e.defaultValue?e.defaultValue:"","picker-options":e.pickerOptions},model:{value:a.formData[e.modelName],callback:function(t){a.$set(a.formData,e.modelName,t)},expression:"formData[item.modelName]"}})],1):a._e(),e.type==="datetimerange"&&e.isArray?l("el-form-item",{key:r,staticClass:"secForm__item2",attrs:{label:a.getLabel(e.label),prop:e.modelName.join("&")}},[l("el-date-picker",{staticClass:"item__datePicker",attrs:{type:e.isNeedTime?"datetimerange":"daterange","range-separator":e.rangeSeparator?e.rangeSeparator:"\u81F3","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F",clearable:e.clearable!==void 0?e.clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":e.valueType,format:e.format,"picker-options":e.pickerOptions},on:{change:function(t){a.middleSearch(e,a.formData[e.modelName.join("&")])}},model:{value:a.formData[e.modelName.join("&")],callback:function(t){a.$set(a.formData,e.modelName.join("&"),t)},expression:"formData[item.modelName.join('&')]"}})],1):a._e(),e.type==="datetimerange"&&!e.isArray?l("el-form-item",{key:r,staticClass:"secForm__item2",attrs:{label:a.getLabel(e.label),prop:e.modelName}},[l("el-date-picker",{staticClass:"item__datePicker",attrs:{type:e.isNeedTime?"datetimerange":"daterange","range-separator":e.rangeSeparator?e.rangeSeparator:"\u81F3","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":["00:00:00","23:59:59"],"value-format":e.valueType,format:e.format,"picker-options":e.pickerOptions},model:{value:a.formData[e.modelName],callback:function(t){a.$set(a.formData,e.modelName,t)},expression:"formData[item.modelName]"}})],1):a._e(),e.type==="monthrange"&&e.isArray?l("el-form-item",{key:r,staticClass:"secForm__item2",attrs:{label:a.getLabel(e.label),prop:e.modelName.join("&")}},[l("el-date-picker",{staticClass:"item__datePicker",attrs:{type:e.type,"range-separator":e.rangeSeparator?e.rangeSeparator:"\u81F3","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F",clearable:e.clearable!==void 0?e.clearable:!0,"value-format":e.valueType,format:e.format,"picker-options":e.pickerOptions},model:{value:a.formData[e.modelName.join("&")],callback:function(t){a.$set(a.formData,e.modelName.join("&"),t)},expression:"formData[item.modelName.join('&')]"}})],1):a._e()]})],2),a.isSearchFormBtn?l("div",{staticClass:"secForm__btns h-40 flex-wrap flex-justify-end flex-1"},[l("el-button",{attrs:{type:"primary"},on:{click:a.search}},[l("i",{staticClass:"el-icon-search"}),a._v(" \u67E5\u8BE2 ")]),l("el-button",{attrs:{plain:"",type:"primary"},on:{click:a.reset}},[l("i",{staticClass:"el-icon-refresh"}),a._v(" \u91CD\u7F6E ")])],1):a._e()],1):a._e()},p=[];const f={name:"SearchComp",props:{searchConfig:{type:Array,default:function(){return[]}},labelWidth:{type:String,default:"116px"},labelPosition:{type:String,default:"right"},autoSearch:{type:Boolean,default:!0},isSearchFormBtn:{type:Boolean,default:!0},showFormToggle:{type:Boolean,default:!0},needDor:{type:Boolean,default:!1},isCacheSearch:{type:Boolean,default:!0},storageId:{type:String,default:""},isAutoSearch:{type:Boolean,default:!0}},data(){return{formData:{},typeList:["input","password","inputNumber","textarea","select","cascader","activeCascader","radioGroup","checkbox","checkboxGroup","baseDatePicker","otherDatePicker","dateTimePicker","datetimerange"],formStatus:!0,defaultValueObj:{}}},computed:{labelwth(){return this.labelWidth?this.labelWidth:"110px"},labelPson(){return this.labelPosition?this.labelPosition:"right"},storageIdP(){return this.storageId?`p_${this.storageId}`:""},filteredSearchConfig(){return this.searchConfig.map(o=>{let{labelKey:l,valueKey:e}=o;return{...o,labelKey:l||"label",valueKey:e||"value"}}).filter(o=>!o.perm||this.$_hasPermission(o.perm))}},created(){this.getFromData()},methods:{middleSearch(a,o){this.getType(a.onChange)==="function"&&a.onChange(a,o),this.isAutoSearch&&this.search()},getLabel(a){return this.needDor?a+"\uFF1A":a},toggleForm(){this.formStatus=!this.formStatus},reset(){for(const a in this.formData)this.defaultValueObj[a]||this.defaultValueObj[a]===0?this.formData[a]=this.defaultValueObj[a]:this.formData[a]=void 0;this.$emit("resetFieldFn"),this.search()},search(){const a={};for(const o in this.formData)o.indexOf("&")!==-1?(o.split("&").forEach((e,r)=>{a[e]=this.formData[o]?this.formData[o][r]:""}),delete a[o]):Array.isArray(this.formData[o])?a[o]=this.formData[o].join(","):a[o]=this.formData[o];this.storageIdP&&this.isCacheSearch&&this.setLocalStorage(this.storageIdP,this.formData),this.$emit("search",a)},getSearchData(){const a={};for(const o in this.formData)o.indexOf("&")!==-1?(o.split("&").forEach((e,r)=>{a[e]=this.formData[o]?this.formData[o][r]:""}),delete a[o]):Array.isArray(this.formData[o])?a[o]=this.formData[o].join(","):a[o]=this.formData[o];return a},async getFromData(){const a={},o={};this.filteredSearchConfig.forEach(l=>{l.type&&(l.clearable!==!1&&(l.clearable=!0),l.modelName&&(l.type==="datetimerange"&&Object.prototype.toString.call(l.modelName)==="[object Array]"?(this.$set(l,l.modelName.join("&"),l.modelName.join("&")),this.$set(l,"isArray",!0),a[l.modelName.join("&")]=l.defaultValue):a[l.modelName]=l.defaultValue),(l.defaultValue||l.defaultValue===0)&&(o[l.modelName]=l.defaultValue))});for(let l=0;l<this.filteredSearchConfig.length;l++){const e=this.filteredSearchConfig[l],r=this.getType(e.options);if(r==="function"){const t=e.options();e.options=t,Array.isArray(t)||(this.Toast(new Error(`${e.label}\u9009\u9879\u7684options\u5FC5\u987B\u662F\u4E00\u4E2A\u6570\u7EC4,\u5F53\u524D\u662F\u4E00\u4E2A${this.getType(t)} `)),e.options=[])}if(r==="asyncfunction")try{e.options=await e.options()}catch(t){e.options=[],this.Toast(t)}}if(this.formData=a,this.defaultValueObj=o,this.storageIdP&&this.isCacheSearch){let l=this.getLocalStorage(this.storageIdP,{});this.isObjectKeys(l,this.formData)&&Object.assign(this.formData,l)}this.autoSearch&&this.search()},handleSelectRemote(a,o){o.remoteMethod&&o.remoteMethod(a,o)}}},n={};var u=c(f,d,p,!1,i,"db8457da",null,null);function i(a){for(let o in n)this[o]=n[o]}var b=function(){return u.exports}();export{b as default};
