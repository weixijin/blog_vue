import{d as l,h as n}from"./data.d27333a2.js";import{n as o}from"./index.25833e42.js";var c=function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("div",{staticClass:"login"},[s("particles-bg",{attrs:{type:"fountain",config:e.config,bg:!0}}),s("div",{staticClass:"right-wrap"},[s("div",{staticClass:"login-wrap common-bg-1"},[s("div",{staticClass:"form"},[s("h3",[e._v("\u627E\u56DE\u5BC6\u7801")]),s("el-col",{staticStyle:{"margin-top":"30px"}},[s("span",{staticClass:"input-label"},[e._v("\u90AE\u7BB1")]),s("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1",size:"medium"},model:{value:e.email,callback:function(t){e.email=typeof t=="string"?t.trim():t},expression:"email"}})],1),s("el-col",{staticStyle:{"margin-top":"30px"}},[s("span",{staticClass:"input-label"},[e._v("\u65B0\u5BC6\u7801")]),s("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801(5~30)",size:"medium",type:"password",autocomplete:"off"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findPassword.apply(null,arguments)}},model:{value:e.password,callback:function(t){e.password=typeof t=="string"?t.trim():t},expression:"password"}})],1),s("el-col",{staticStyle:{"margin-top":"30px"}},[s("span",{staticClass:"input-label"},[e._v("\u786E\u8BA4\u5BC6\u7801")]),s("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801(5~30)",size:"medium",type:"password",autocomplete:"off"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findPassword.apply(null,arguments)}},model:{value:e.checkPass,callback:function(t){e.checkPass=typeof t=="string"?t.trim():t},expression:"checkPass"}})],1),s("el-col",{staticStyle:{"margin-top":"30px"}},[s("span",{staticClass:"input-label"},[e._v("\u9A8C\u8BC1\u7801")]),s("el-col",{staticClass:"code"},[s("el-input",{attrs:{size:"medium"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)}},model:{value:e.code,callback:function(t){e.code=typeof t=="string"?t.trim():t},expression:"code"}}),e.isTrue?s("p",{staticClass:"handleyzm"},[e._v(e._s(e.isNum)+"\u79D2\u540E\u53EF\u4EE5\u91CD\u65B0\u83B7\u53D6")]):s("p",{staticClass:"handleyzm",on:{click:e.getEmailCode}},[e._v("\u83B7\u53D6\u9A8C\u8BC1\u7801")])],1)],1),s("el-col",{staticStyle:{"margin-top":"30px"}},[s("el-button",{staticClass:"login-btn",attrs:{loading:e.loading},on:{click:e.findPassword}},[e._v(" \u91CD\u7F6E\u5BC6\u7801 ")])],1),s("div",{staticClass:"gologincover"},[s("router-link",{staticClass:"gologin",attrs:{to:"/login"}},[e._v("\u524D\u5F80\u767B\u9646")]),s("router-link",{staticClass:"findPassword",attrs:{to:"/register"}},[e._v("\u524D\u5F80\u6CE8\u518C")])],1)],1)])])],1)},u=[];const p={components:{},data(){return{isTrue:!1,isNum:60,email:"",password:"",checkPass:"",code:"",loading:!1,btnText:"\u767B\u5F55"}},methods:{async getEmailCode(){if(this.email=="")return this.$message.error("\u8BF7\u5148\u8F93\u5165\u90AE\u7BB1,\u624D\u80FD\u83B7\u53D6\u9A8C\u8BC1\u7801");var e=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;if(!e.test(this.email))return this.$message.error("\u8BF7\u68C0\u67E5\u90AE\u7BB1\u662F\u5426\u5408\u6CD5");await l({email:this.email}),this.isTrue=!0,setInterval(()=>{this.isNum>1?this.isNum-=1:(this.isTrue=!1,this.isNum=60)},1e3)},async findPassword(){let{email:e,password:a,code:s,checkPass:t}=this;if(!e){this.$message.error("\u8BF7\u8F93\u5165\u8D26\u53F7");return}if(!a){this.$message.error("\u8BF7\u8F93\u5165\u5BC6\u7801");return}if(a.length<5||a.length>30){this.$message.error("\u5BC6\u7801\u957F\u5EA65~30\u4E2A\u5B57\u7B26");return}if(this.password!=this.checkPass){this.$message.error("\u4E24\u6B21\u5BC6\u7801\u8F93\u5165\u4E0D\u4E00\u81F4");return}if(!s){this.$message.error("\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801");return}let i=await n({email:e,password:a,code:s,checkPass:t});i.code==200&&(this.$message.success(i.msg),this.$router.push("/login"))}}},r={};var d=o(p,c,u,!1,m,"48dce444",null,null);function m(e){for(let a in r)this[a]=r[a]}var h=function(){return d.exports}();export{h as default};
