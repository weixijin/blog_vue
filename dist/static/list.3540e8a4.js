import{u}from"./userList.00e1924b.js";import{n as d}from"./index.25833e42.js";var c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"p-20 bg-F7F8FA h-100vh"},[s("TrainPage",{ref:"TrainPageRef",attrs:{searchConfig:e.searchConfig,tableConfig:e.tableConfig,sendUrl:"get_minds",customize:""},scopedSlots:e._u([{key:"author_name",fn:function(r){var i,n=r.record;return[e._v(" "+e._s((n==null||(i=n.author_id)===null||i===void 0?void 0:i.username)||"---")+" ")]}},{key:"edit_users",fn:function(r){var i=r.record;return[s("userList",{attrs:{list:i.edit_users}})]}}])},[s("template",{slot:"btnList"},[s("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.goToMind("")}}},[e._v("\u65B0\u589E")])],1)],2)],1)},m=[];const p={name:"jsmindList",components:{userList:u},data(){return{list:[],searchConfig:[{label:"\u540D\u79F0",type:"input",modelName:"content"},{label:"\u5206\u7C7B",type:"select",modelName:"jsmind_type",options:()=>this.jsmindTypes},{label:"\u6743\u9650",type:"select",modelName:"type2",options:()=>this.jsmindTypes1}],tableConfig:{isSelection:!1,maxHeightFlag:!1,stripe:!0,filterData:e=>e.map(t=>{let{create_time:s,updata_time:r,jsmind_type:i,watch_users:n,edit_users:o}=t;return{...t,_jsmind_type:this.jsmindTypes.find(a=>a.value==i).label||"",_watch_users:n.map(a=>({url:a.header_img,title:a.username})),_edit_users:o.map(a=>({url:a.header_img,title:a.username})),create_time_:this.klDateFormat(s),updata_time_:this.klDateFormat(r)}}),columnObj:[{label:"\u8111\u56FE\u540D\u79F0",props:"mind_title",clickFn:e=>{this.goToMind(e==null?void 0:e._id)}},{label:"\u4F5C\u8005",props:"author_name",slot:"author_name"},{label:"\u8282\u70B9\u6570",props:"mindLength"},{label:"\u5206\u7C7B",props:"_jsmind_type"},{label:"\u53EF\u67E5\u770B\u4EBA\u5458",minWidth:200,props:"_watch_users",previewA:!0,isImage:!0,class:["b-r-50"],clickFn:e=>{console.log(e)}},{label:"\u53EF\u7F16\u8F91\u4EBA\u5458",minWidth:200,props:"_edit_users",previewA:!0,isImage:!0,class:["b-r-50"],clickFn:e=>{console.log(e)}},{label:"\u66F4\u65B0\u65E5\u671F",props:"updata_time_"},{label:"\u521B\u5EFA\u65E5\u671F",props:"create_time_"},{label:"\u64CD\u4F5C",slot:"projectDetail",props:"action",lock:!0,fixed:"right",children:[{label:"\u5220\u9664",type:"danger",clickFn:e=>{this.del(e._id)}}]}]}}},computed:{...Vuex.mapGetters(["jsmindTypes","jsmindTypes1"]),...Vuex.mapGetters(["getterNavId","isAdmin"])},created(){this.isAdmin&&this.searchConfig.push({label:"\u7528\u6237",type:"select",modelName:"_user_id",options:async()=>new Promise(e=>{this.$apis.get_authors({page:1,limit:50,cache:!0,expire_time:3600*1e3}).then(t=>{const s=t.data.data.map(r=>({label:r.username,value:r._id}));e(s)})})})},methods:{del(e){this.$confirm("\u786E\u8BA4\u5220\u9664\u8BE5\u8BB0\u5F55\u5417\uFF1F").then(()=>{this.$apis.del_mind({_id:e}).then(()=>{this.$message.success("\u5220\u9664\u6210\u529F"),this.$refs.TrainPageRef.getAddData()}).catch(()=>{})}).catch(()=>{})},goToMind(e){let t={};e&&(t._id=e),this.goTo("/tool/jsmind_details",{query:t,target:"_blank"})}}},l={};var _=d(p,c,m,!1,h,null,null,null);function h(e){for(let t in l)this[t]=l[t]}var v=function(){return _.exports}();export{v as default};
