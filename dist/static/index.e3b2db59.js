import{h as s,n as l}from"./index.25833e42.js";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("TrainPage",{ref:"TrainPageRef",attrs:{searchConfig:e.searchConfig,tableConfig:e.tableConfig,sendUrl:"get_weights",customize:!1,visOptions:e.visOptions}}),i("e-dialog",{attrs:{"custom-class":"zl-dialog",title:e.rowDate._id?"\u7F16\u8F91":"\u65B0\u589E",width:"600px",header:"","close-on-click-modal":!1},on:{closed:e.handleClosed,confirm:e.handleConfirm},model:{value:e.dialogVisible,callback:function(a){e.dialogVisible=a},expression:"dialogVisible"}},[i("div",{staticClass:"p-l-20 p-t-20"},[i("el-input-number",{attrs:{"controls-position":"right",min:1,max:500},on:{change:e.handleChange},model:{value:e.weight,callback:function(a){e.weight=a},expression:"weight"}})],1)])],1)},n=[];const f={name:"weightEcharts",data(){return{standardWeight:70,list:[],visOptions:{},isLoading:!0,height:0,width:0,rowDate:{},dialogVisible:!1,searchConfig:[{label:"\u65F6\u95F4\u8303\u56F4",type:"datetimerange",modelName:["start_time","end_time"],isArray:!0,valueType:"timestamp",pickerOptions:this.getPickerOptions()},{label:"\u6700\u5927\u8FD4\u56DE\u6761\u6570",type:"input",modelName:"page_size"}],tableConfig:{isShowTable:!1,isSelection:!1,maxHeightFlag:!1,stripe:!0,visType:"echarts",filterData:async e=>(this.list=e,await this.handlerEcharts1(),e),btns:{children:[{label:"\u65B0\u589E",type:"primary",clickFn:()=>{this.openDialog()}}]}}}},computed:{...Vuex.mapState(["userdata","options"]),noteDoneType(){var e;return((e=this.options)==null?void 0:e.noteDoneType)||[]},summaryTypeOptions(){var e;return((e=this.options)==null?void 0:e.summaryTypeOptions)||[]}},methods:{async handlerEcharts(){console.log(this.list),this.visOptions={type:"line",data:{labels:this.list.map(e=>this.klDateFormat(e.create_time)),datasets:[{label:"Dataset 1",data:this.list.map(e=>e.weight-75),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgb(255, 99, 132)"}]},options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Chart.js Line Chart"}}},scales:{x:{type:"linear"}}}},async handlerEcharts1(){if(typeof echarts=="undefined"){await this.sleep(),this.handlerEcharts1();return}this.visOptions={backgroundColor:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#c86589"},{offset:1,color:"#06a7ff"}],!1),title:{text:"\u4F53\u91CD\u8D8B\u52BF\u56FE",left:"center",bottom:"5%",textStyle:{color:"#fff",fontSize:16}},grid:{top:"10%",left:"5%",right:"5%",bottom:"15%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[],axisLabel:{margin:30,color:"#ffffff"},axisLine:{show:!1},axisTick:{show:!0,length:25,lineStyle:{color:"#ffffff1f"}},splitLine:{show:!0,lineStyle:{color:"#ffffff1f"}}},yAxis:[{type:"value",position:"right",axisLabel:{margin:20,color:"#ffffff"},axisTick:{show:!0,length:15,lineStyle:{color:"#ffffff1f"}},splitLine:{show:!0,lineStyle:{color:"#ffffff1f"}},axisLine:{lineStyle:{color:"#fff",width:2}}}],series:[{name:"\u6CE8\u518C\u603B\u91CF",type:"line",smooth:!0,showAllSymbol:!0,symbol:"circle",symbolSize:6,lineStyle:{normal:{color:"#fff"}},label:{show:!0,position:"top",textStyle:{color:"#fff"}},itemStyle:{color:"red",borderColor:"#fff",borderWidth:3},tooltip:{show:!1},areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#eb64fb"},{offset:1,color:"#3fbbff0d"}],!1)}},data:[]}]};let e=[],t=[];this.list.forEach(({updata_time:i,weight:a})=>{e.unshift(this.klDateFormat(i,"MM/dd")),t.unshift((a-this.standardWeight).toFixed(2))}),this.visOptions.xAxis.data=e,this.visOptions.series[0].data=t},del(e){this.$confirm("\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u8BE5\u6587\u4EF6, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{s.delete_weight({_id:e._id}).then(()=>{this.initTable()}).catch(t=>{this.Toast(t)})}).catch(t=>{})},handleClosed(){this.rowDate={},this.dialogVisible=!1},handleConfirm(){let{_id:e}=this.rowDate,t={weight:this.weight};e&&(t._id=e),s.post_weight(t).then(i=>{this.handleClosed(),this.initTable()}).catch(i=>{this.Toast(i)})},openDialog(){this.dialogVisible=!0}}},o={};var h=l(f,r,n,!1,c,null,null,null);function c(e){for(let t in o)this[t]=o[t]}var p=function(){return h.exports}();export{p as default};
