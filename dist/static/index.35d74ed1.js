import{n as c,h as n}from"./index.25833e42.js";var m=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"emoji"},[t("kl-tab",{attrs:{options:e.tabOptions},on:{change:e.changeCom},model:{value:e.activeName,callback:function(i){e.activeName=i},expression:"activeName"}}),t("div",{staticClass:"main"},[e._l(e.emojiList,function(i){return t("div",{key:i._id,staticClass:"item"},[t("img",{staticClass:"item-emoji",attrs:{src:e.emojiBasePath+i.emoji_url,alt:""}}),t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.changeEmoji(i)}},model:{value:i.emoji_isshow,callback:function(a){e.$set(i,"emoji_isshow",a)},expression:"item.emoji_isshow"}}),t("el-tag",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteEmoji(i)}}},[e._v("\u5220\u9664")])],1)}),e._l(10,function(i){return t("i",{key:i})})],2)],1)},l=[];const _={components:{},data(){return{activeName:"wxj0",tabOptions:[],emojiList:[],activeIndexEmojiClass:0}},created(){this.getInit()},methods:{changeEmoji(e){let{_id:s,emoji_isshow:t}=e;n.putEmoji({_id:s,emoji_isshow:t}).then(i=>{this.$message.success(i.msg)}).catch(i=>{e.emoji_isshow=!e.emoji_isshow})},deleteEmoji(e){this.$confirm("\u786E\u5B9A\u5220\u9664\u5417").then(s=>{n.delEmoji({_id:e._id}).then(t=>{this.$message.success(t.msg),this.getEmojis()})}).catch(s=>{})},async getInit(){let e=await this.$apis.get_emoji_class({cache:!0});if(!this.isArrayLength(e==null?void 0:e.data)){this.Toast("get_emoji_class\u83B7\u53D6\u6570\u636E\u683C\u5F0F\u9519\u8BEF");return}this.tabOptions=e.data.map((s,t)=>({value:"wxj"+t,label:s.emoji_class_fater_type_name})),this.emojiClassList=(e==null?void 0:e.data)||[],this.getEmojis()},async getEmojis(){let e=await this.$apis.get_emojis({emoji_class_id:this.emojiClassList[this.activeIndexEmojiClass]._id,expire_time:-1});this.emojiList=(e==null?void 0:e.data)||[],this.emojiList.length===0&&this.$message.warning("\u5F53\u524D\u5206\u7C7B\u4E0B\u6CA1\u6709\u6570\u636E")},changeCom(e){this.activeIndexEmojiClass=this.tabOptions.findIndex(s=>s.value===e),this.getEmojis()}}},o={};var r=c(_,m,l,!1,h,"62de81b0",null,null);function h(e){for(let s in o)this[s]=o[s]}var d=function(){return r.exports}();export{d as default};
