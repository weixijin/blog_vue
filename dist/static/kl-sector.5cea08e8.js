import{n as g}from"./index.25833e42.js";var y=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("canvas",{class:i.canvasClass})},w=[];const u=function(){this.el="",this.ctx="",this.w=0,this.h=0,this.x0=0,this.y0=0,this.radius=100,this.outLine=20,this.rectW=30,this.rectH=16,this.space=20};u.prototype.init=function(i){let t=document.querySelector(this.el);if(!t||(this.ctx=t.getContext("2d"),!this.ctx))return;let e=2*this.radius,s=2*this.radius;this.ctx.canvas.width=e,this.ctx.canvas.height=s,this.w=e,this.h=s,this.x0=this.w/2,this.y0=this.h/2,i[0].num===360&&i.splice(1,1),this.drawPie(i)};u.prototype.drawPie=function(i){var t=this,e=this.transformAngle(i),s=0;e.forEach(function(n,a){var c=s+n.angle;t.ctx.beginPath(),t.ctx.moveTo(t.x0,t.y0),t.ctx.arc(t.x0,t.y0,t.radius,s,c);let o=t.ctx.fillStyle=n.color;t.ctx.fill(),n.title&&t.drawTitle(s,n.angle,o,n.title),s=c})};u.prototype.drawTitle=function(i,t,e,s){var n=this.radius+this.outLine,a=Math.cos(i+t/2)*n,c=Math.sin(i+t/2)*n,o=this.x0+a,l=this.y0+c;this.ctx.beginPath(),this.ctx.moveTo(this.x0,this.y0),this.ctx.lineTo(o,l),this.ctx.strokeStyle=e,this.ctx.font="14px Microsoft YaHei";var r=this.ctx.measureText(s).width;o>this.x0?(this.ctx.lineTo(o+r,l),this.ctx.textAlign="left"):(this.ctx.lineTo(o-r,l),this.ctx.textAlign="right"),this.ctx.stroke(),this.ctx.textBaseline="bottom",this.ctx.fillText(s,o,l)};u.prototype.drawDesc=function(i,t){this.ctx.fillRect(this.space,this.space+i*(this.rectH+10),this.rectW,this.rectH),this.ctx.beginPath(),this.ctx.textAlign="left",this.ctx.textBaseline="top",this.ctx.font="12px Microsoft YaHei",this.ctx.fillText(t,this.space+this.rectW+10,this.space+i*(this.rectH+10))};u.prototype.transformAngle=function(i){var t=0;return i.forEach(function(e,s){t+=e.num}),i.forEach(function(e,s){var n=e.num/t*Math.PI*2;e.angle=n}),i};function _(i,t,e,s){var n,a,c,o,l=[],r=[];s=s||1;var h=function(f){return Math.pow(f/255,s)};for(i=v(i).map(h),t=v(t).map(h),n=0;n<e;n++){for(c=n/(e-1),o=1-c,a=0;a<3;a++)r[a]=b(Math.round(Math.pow(i[a]*o+t[a]*c,1/s)*255).toString(16));l.push("#"+r.join(""))}return l}function v(i){return i.length===4?i.substr(1).split("").map(function(t){return 17*parseInt(t,16)}):[i.substr(1,2),i.substr(3,2),i.substr(5,2)].map(function(t){return parseInt(t,16)})}function b(i){return i.length===1?"0"+i:i}const C={name:"klSector",props:{deg:{type:Number,default:0},radius:{type:Number,default:100},color:{type:String,default:""},bg:{type:String,default:"#f5f5f5"},animation:{type:Boolean,default:!1},startColor:{type:String,default:"#67c23a"},endColor:{type:String,default:"#F56C6C"}},data(){return{canvasClass:""}},created(){this.canvasClass=this.createId()},mounted(){this.init()},watch:{deg(){this.init()}},methods:{init(){let{deg:i,color:t,bg:e,radius:s,animation:n,startColor:a,endColor:c}=this;this.drawSector({el:`.${this.canvasClass}`,deg:i,color:t,bg:e,radius:s,animation:n,startColor:a,endColor:c})},drawSector({el:i,deg:t,color:e,bg:s,radius:n=30,content:a,animation:c=0,startColor:o,endColor:l}){let r=[{title:"",num:0,color:"red"},{title:"",num:360,color:"#fff"}],h=new u;if(h.el=i,h.radius=n,r[0].color=e,r[1].title=a,r[1].color=s,!c||!t)r[0].num=t,r[1].num=360-t,h.init(r);else{let f=1.5,p=0,x=[];o&&l&&!e&&(x=_(o,l,Math.floor(360/f)));let d=setInterval(()=>{o&&l&&!e&&(r[0].color=x[p],p+=1),r[0].num+=f,r[1].num-=f,h.init(r),r[0].num>=t&&(r[0].num=t,h.init(r),clearInterval(d),d=null)},0)}}}},m={};var M=g(C,y,w,!1,T,null,null,null);function T(i){for(let t in m)this[t]=m[t]}var A=function(){return M.exports}();export{A as default};
