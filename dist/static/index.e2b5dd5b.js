import{n as S}from"./index.25833e42.js";var C=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",[r("TrainPage",{ref:"TrainPageRef",attrs:{searchConfig:e.searchConfig,tableConfig:e.tableConfig,sendUrl:"get_notes_list_echarts",customize:!1,visOptions:e.visOptions}})],1)},z=[];const D={name:"notesEcharts",data(){return{visOptions:{},list:[],searchConfig:[{label:"\u662F\u5426\u8FC7\u6EE4",type:"select",modelName:"checked",options:[{label:"\u662F",value:!0},{label:"\u5426",value:!1}]},{label:"\u5B8C\u6210\u72B6\u6001",type:"select",modelName:"note_done",isMuli:!0,options:()=>this.noteDoneType},{label:"\u7EAA\u8981\u5206\u7C7B",type:"select",modelName:"note_type",options:()=>this.summaryTypeOptions},{label:"\u65F6\u95F4\u8303\u56F4",type:"datetimerange",modelName:["start_time","end_time"],isArray:!0,valueType:"timestamp",pickerOptions:this.getPickerOptions()}],tableConfig:{isShowTable:!1,isSelection:!1,maxHeightFlag:!1,stripe:!0,visType:"echarts",filterData:e=>(this.list=e,this.handlerEcharts(),e)}}},computed:{...Vuex.mapState(["userdata","options"]),noteDoneType(){var e;return((e=this.options)==null?void 0:e.noteDoneType)||[]},summaryTypeOptions(){var e;return((e=this.options)==null?void 0:e.summaryTypeOptions)||[]}},methods:{handlerEcharts(){var y;let{list:e}=this,{checked:a,start_time:r,end_time:s}=((y=this.$refs.TrainPageRef)==null?void 0:y.searchData)||{},h=[],f=[],d=[],b=[],g=[],_=[],v=[];a&&(e=e.filter(({note_begin_time:t,note_testing_time:o,note_end_time:i,note_type:n})=>{if(+n==7&&(r<t&&t<s||r<o&&o<s)||+n==4&&(r<t&&t<s||r<i&&i<s))return!0}).map(t=>{let{note_begin_time:o,note_testing_time:i,note_type:n}=t;return o<r&&(t.note_begin_time=r),i>s&&+n==7&&(t.note_testing_time=s),t})),e=e.sort((t,o)=>t.note_begin_time-o.note_begin_time),e.forEach(({note_content:t,note_begin_time:o,note_testing_time:i,note_end_time:n,note_type:m})=>{h.push(t);const l=new Date(this.klDateFormat(o)),c=new Date(this.klDateFormat(n)),u=new Date(this.klDateFormat(i));f.push(l),d.push(c),b.push(l),+m==7?(g.push(u),_.push(u),v.push(c)):g.push(c)}),a&&(f=[],d=[],_=[],v=[]),this.visOptions={backgroundColor:"#fff",title:{text:"",padding:20,textStyle:{fontSize:17,fontWeight:"bolder",color:"#333"},subtextStyle:{fontSize:13,fontWeight:"bolder"}},legend:{data:h,align:"right",right:80,top:50},grid:{containLabel:!0,show:!1,right:130,left:40,bottom:40,top:90},xAxis:{type:"time",axisLabel:{show:!0,interval:0}},yAxis:{axisLabel:{show:!0,interval:0,formatter:function(t,o){var i="",n=5,m=t.length,l=Math.ceil(m/n);if(l>1){for(var c=0;c<l;c++){var u=c*n,p=u+n,k=t.substring(u,p)+`
`;i+=k}return i}else return t}},data:h},tooltip:{trigger:"axis",formatter:function(t){var o="",i="",n="",m="",l="",c="";for(var u in t){var p=u%2;p||(n=t[u].data,m=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()),p&&(i=t[u].seriesName,l=t[u].data,c=l.getFullYear()+"-"+(l.getMonth()+1)+"-"+l.getDate(),o+=i+" : "+m+"~"+c+"</br>")}return o}},series:[{name:"\u5F00\u59CB\u65F6\u95F4",type:"bar",stack:"\u603B\u91CF0",itemStyle:{normal:{color:"white"}},zlevel:-1,z:3,data:f},{name:"\u6574\u4E2A\u9636\u6BB5\u65F6\u95F4",type:"bar",stack:"\u603B\u91CF0",label:{normal:{show:!0,color:"#000",position:"right",formatter:function(t){return t.seriesName}}},itemStyle:{normal:{color:"skyblue",borderColor:"#fff",borderWidth:2}},zlevel:-1,data:d},{name:"\u5F00\u59CB\u65F6\u95F4",type:"bar",stack:"\u603B\u91CF1",itemStyle:{normal:{color:"white"}},zlevel:-1,z:3,data:b},{name:"\u5F00\u53D1\u9636\u6BB5\u65F6\u95F4",type:"bar",stack:"\u603B\u91CF1",label:{normal:{show:!0,color:"#000",position:"right",formatter:function(t){return t.seriesName}}},itemStyle:{normal:{color:"green",borderColor:"#fff",borderWidth:2}},zlevel:-1,data:g},{name:"\u5F00\u59CB\u65F6\u95F4",type:"bar",stack:"\u603B\u91CF2",itemStyle:{normal:{color:"white"}},zlevel:-1,z:3,data:_},{name:"\u6D4B\u8BD5\u9636\u6BB5\u65F6\u95F4",type:"bar",stack:"\u603B\u91CF2",label:{normal:{show:!0,color:"#000",position:"right",formatter:function(t){return t.seriesName}}},itemStyle:{normal:{color:"yellow",borderColor:"#fff",borderWidth:2}},zlevel:-1,data:v}]}}}},x={};var T=S(D,C,z,!1,F,null,null,null);function F(e){for(let a in x)this[a]=x[a]}var L=function(){return T.exports}(),N=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",{staticClass:"echarts-page"},[r("kl-tab",{attrs:{options:e.pageList},on:{change:e.handleClick},model:{value:e.page,callback:function(s){e.page=s},expression:"page"}}),r("keep-alive",[r(e.page,{tag:"component",staticClass:"m-t-10",on:{change:e.change}})],1)],1)},O=[];const $={components:{note_page:L},data(){return{pageList:[{value:"note_page",label:"\u7EAA\u8981\u53EF\u89C6\u5316"}],page:"note_page",monitorList:[],total:0}},mounted(){},methods:{change(e){this.page=e.page},handleClick(e){this.page=e},initMonitor(){adminApi.get_monitor_list_echarts().then(e=>{this.monitorList=e.data.list,this.total=e.data.count})},initNotes(){var e=echarts.init(document.getElementById("main111")),a=44,r={color:"#468EFD"};const s={backgroundColor:"#fff",tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"\u5185\u90E8\u8FDB\u5EA6\u6761",type:"gauge",radius:"80%",splitNumber:10,axisLine:{lineStyle:{color:[[a/100,r.color],[1,"#111F42"]],width:8}},axisLabel:{show:!1},axisTick:{show:!1},splitLine:{show:!1},itemStyle:{show:!1},detail:{formatter:function(h){if(h!==0){var f=Math.round(h);return parseInt(f).toFixed(0)+"%"}else return 0},offsetCenter:[0,82],textStyle:{padding:[0,0,0,0],fontSize:18,fontWeight:"700",color:r.color}},title:{show:!0,offsetCenter:[0,46],textStyle:{color:"#fff",fontSize:14,fontWeight:400,fontFamily:"PingFangSC"}},data:[{name:"title",value:a}],pointer:{show:!0,length:"75%",radius:"20%",width:10},animationDuration:4e3},{name:"\u5916\u90E8\u523B\u5EA6",type:"gauge",radius:"50%",min:0,max:100,splitNumber:10,startAngle:225,endAngle:-45,axisLine:{show:!0,lineStyle:{width:1,color:[[1,"rgba(0,0,0,0)"]]}},axisLabel:{show:!0,color:"#4d5bd1",distance:25,formatter:function(h){switch(h+""){case"0":return"0";case"10":return"10";case"20":return"20";case"30":return"30";case"40":return"40";case"50":return"50";case"60":return"60";case"70":return"70";case"80":return"80";case"90":return"90";case"100":return"100"}}},axisTick:{show:!0,splitNumber:7,lineStyle:{color:r.color,width:1},length:-8},splitLine:{show:!0,length:-20,lineStyle:{color:r.color}},detail:{show:!1},pointer:{show:!1}}]};e.setOption(s)}}},w={};var E=S($,N,O,!1,M,"695a218f",null,null);function M(e){for(let a in w)this[a]=w[a]}var W=function(){return E.exports}();export{W as default};
