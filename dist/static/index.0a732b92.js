import{p as y,n as i,h as b}from"./index.25833e42.js";var C=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"common-cover"},[t("comHeader"),t("div",{staticClass:"common-scroll better-scroll p-t-10"},[t("div",{staticClass:"w-1100 common-bg-1 p-20"},[t("div",{staticClass:"user-infos"},[t("div",{staticClass:"left pr"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.params,rules:e.rules,"label-width":"140px"}},[t("el-form-item",{attrs:{label:"\u7528\u6237\u6635\u79F0\uFF1A",prop:"username"}},[t("el-input",{staticClass:"w-320",model:{value:e.params.username,callback:function(a){e.$set(e.params,"username",a)},expression:"params.username"}})],1),t("el-form-item",{attrs:{label:"\u90AE\u7BB1\uFF1A",prop:"email"}},[t("el-input",{staticClass:"w-320",attrs:{clearable:"",disabled:["normal","admin"].includes(e.userdata.role)},model:{value:e.email,callback:function(a){e.email=a},expression:"email"}})],1),e.isTourist?t("div",{staticClass:"c-danger f-14 p-l-20 m-b-10"},[e._v(" \u8BF7\u786E\u4FDD\u90AE\u7BB1\u7684\u6B63\u786E\u6027\uFF0C\u540E\u7EED\u4FEE\u6539\u5BC6\u7801\u3001\u627E\u56DE\u5BC6\u7801\u7B49\u64CD\u4F5C\u90FD\u4F1A\u7528\u5230 ")]):e._e(),e.isTourist?t("el-form-item",{attrs:{label:"\u5BC6\u7801\uFF1A",prop:"password"}},[t("el-input",{staticClass:"w-320",attrs:{clearable:""},model:{value:e.password,callback:function(a){e.password=a},expression:"password"}})],1):e._e(),t("el-form-item",{attrs:{label:"\u4E3B\u9898\u8272\uFF1A",prop:"primary_color"}},[t("div",{staticClass:"flex-center-wrap"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.params.primary_color,expression:"params.primary_color"}],staticClass:"w-100 h-40 m-r-10",attrs:{type:"color"},domProps:{value:e.params.primary_color},on:{input:function(a){a.target.composing||e.$set(e.params,"primary_color",a.target.value)}}}),t("el-button",{on:{click:function(a){e.params.primary_color="#409EFF"}}},[e._v("\u9ED8\u8BA4")])],1)]),e.isAdmin?t("el-form-item",{attrs:{label:"\u4E2A\u4EBA\u6807\u7B7E\uFF1A"}},e._l(e.userTags,function(a){return t("el-tag",{key:a._id,staticClass:"m-r-5",attrs:{"disable-transitions":!1}},[e._v(" "+e._s(a.tag_content)+" ")])}),1):e._e(),t("el-form-item",{attrs:{label:"\u6587\u7AE0\u5185\u5BB9\u641C\u7D22\uFF1A",prop:"user_blog_search_type"}},[t("el-radio",{attrs:{label:"1"},model:{value:e.params.user_blog_search_type,callback:function(a){e.$set(e.params,"user_blog_search_type",a)},expression:"params.user_blog_search_type"}},[e._v(" \u5173\u952E\u5B57")]),t("el-radio",{attrs:{label:"2"},model:{value:e.params.user_blog_search_type,callback:function(a){e.$set(e.params,"user_blog_search_type",a)},expression:"params.user_blog_search_type"}},[e._v("\u5185\u5BB9\u641C\u7D22")])],1),t("el-form-item",{attrs:{label:"\u8FDD\u89C4\u6B21\u6570\u5C55\u793A\uFF1A",prop:"user_first_show_type"}},[t("el-radio",{attrs:{label:"1"},model:{value:e.params.user_first_show_type,callback:function(a){e.$set(e.params,"user_first_show_type",a)},expression:"params.user_first_show_type"}},[e._v("\u6253\u5F00")]),t("el-radio",{attrs:{label:"2"},model:{value:e.params.user_first_show_type,callback:function(a){e.$set(e.params,"user_first_show_type",a)},expression:"params.user_first_show_type"}},[e._v("\u5173\u95ED")])],1),t("el-form-item",{attrs:{label:"\u9605\u8BFB\u8BB0\u5F55\u4E0A\u62A5\uFF1A",prop:"user_blog_history"}},[t("el-radio",{attrs:{label:"1"},model:{value:e.params.user_blog_history,callback:function(a){e.$set(e.params,"user_blog_history",a)},expression:"params.user_blog_history"}},[e._v("\u6253\u5F00")]),t("el-radio",{attrs:{label:"2"},model:{value:e.params.user_blog_history,callback:function(a){e.$set(e.params,"user_blog_history",a)},expression:"params.user_blog_history"}},[e._v("\u5173\u95ED")])],1),e.isAdmin?t("el-form-item",{attrs:{label:"\u6BCF\u65E5\u90AE\u4EF6\u63A8\u9001\u63D0\u793A\uFF1A",prop:"tipGoEmailDayStatus"}},[t("el-radio",{attrs:{label:1},model:{value:e.params.tipGoEmailDayStatus,callback:function(a){e.$set(e.params,"tipGoEmailDayStatus",a)},expression:"params.tipGoEmailDayStatus"}},[e._v("\u672A\u5F00\u542F")]),t("el-radio",{attrs:{label:2},model:{value:e.params.tipGoEmailDayStatus,callback:function(a){e.$set(e.params,"tipGoEmailDayStatus",a)},expression:"params.tipGoEmailDayStatus"}},[e._v("\u5F00\u542F")])],1):e._e(),+e.params.user_first_show_type==1?t("el-form-item",{attrs:{label:"\u8FDD\u89C4\u76EE\u6807",prop:"user_violation_target"}},[t("el-input",{staticClass:"w-320",attrs:{type:"number"},model:{value:e.params.user_violation_target,callback:function(a){e.$set(e.params,"user_violation_target",a)},expression:"params.user_violation_target"}})],1):e._e(),t("div",{staticClass:"h-60 flex-center-wrap p-l-50"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("\u786E \u8BA4")])],1)],1)],1)])])])],1)},w=[];const x={components:{},data(){return{pageOption:{page:1,limit:10,total:0},params:{username:"",primary_color:"",user_blog_history:"1",user_blog_search_type:"1",user_first_show_type:"1",user_violation_target:"",tipGoEmailDayStatus:1},email:"",password:"",rules:{username:[{required:!0,message:"\u8BF7\u8F93\u5165\u6635\u79F0",trigger:"blur"},{type:"string",min:3,max:30,message:"\u957F\u5EA6\u5728 3 \u5230 30 \u4E2A\u5B57\u7B26",trigger:"blur"}],user_violation_target:[{required:!0,message:"\u8BF7\u8F93\u5165\u8FDD\u89C4\u76EE\u6807",trigger:"blur"},{validator:(e,s,t)=>{if(s<0||s>100)return t(new Error("\u8303\u56F40~100"));t()},trigger:"change"}]}}},computed:{...Vuex.mapState(["userdata","userTags"]),...Vuex.mapGetters(["isAdmin"]),isTourist(){return this.userdata.role==="tourist"}},mounted(){this.init()},methods:{...Vuex.mapMutations(["setUserData"]),submit(){let{ruleForm:e}=this.$refs;e&&e.validate(s=>{if(!s)return!1;let{_id:t,role:a}=this.userdata;const{password:r,email:l,params:n,isTourist:c}=this;let o={};if(c){if((l||r)&&(!l||!r))return this.$message.error("\u90AE\u7BB1\u6216\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"),!1;Object.assign(o,{_id:t,email:l,password:r},n)}else o=Object.assign(o,n);y(o).then(_=>{this.isObject(_.data)&&(this.setUserData({user:_.data}),this.$message.success("\u4FEE\u6539\u6210\u529F"),localforage.removeItem("tourist_email"))})})},init(){let{username:e,primary_color:s,user_blog_history:t,user_blog_search_type:a,user_first_show_type:r,email:l,user_violation_target:n,tipGoEmailDayStatus:c}=this.userdata||{};Object.assign(this.params,{username:e,primary_color:s,user_blog_history:t,user_blog_search_type:a,user_first_show_type:r,user_violation_target:n,tipGoEmailDayStatus:c}),this.email=l,this.isTourist&&(this.email="",this.password="")}}},u={};var $=i(x,C,w,!1,E,"46ded90e",null,null);function E(e){for(let s in u)this[s]=u[s]}var S=function(){return $.exports}(),I=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"p-f bg-fff h-45 w-vw-100 flex-wrap flex-center-wrap flex-justify-between user-center-header"},[t("div",{staticClass:"flex-wrap flex-center-wrap"},[t("i",{staticClass:"el-icon-arrow-left f-20 c-333 f-550"}),t("img",{staticClass:"h-20 w-20 b-r-50 m-l-5",attrs:{src:e.userInfoAll.user_info.header_img}}),t("span",{staticClass:"m-l-10 f-16 c-555 f-500"},[e._v(" "+e._s(e.userInfoAll.user_info.username)+" ")])]),e._m(0)])},k=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex-wrap flex-center-wrap"},[t("p",{staticClass:"user-guan f-10 c-555"},[e._v(" \u5173\u6CE8 ")]),t("i",{staticClass:"el-icon-set-up f-550 f-22 c-555 m-l-10"})])}];const A={props:{userInfoAll:{type:Object,default:()=>{user_info}}},data(){return{isShow:!1}},methods:{}},p={};var H=i(A,I,k,!1,O,"7daf681c",null,null);function O(e){for(let s in p)this[s]=p[s]}var T=function(){return H.exports}(),j=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"pr"},[t("div",{staticClass:"user-header-img-cover p-a"},[t("img",{staticClass:"w-50 h-50 b-r-50 user-header-border",attrs:{src:e.userInfoAll.user_info.header_img}})]),t("div",{staticClass:"flex-wrap flex-center-wrap flex-justify-between p-t-10"},[t("p",{staticClass:"f-500 f-18 user-name-cl"},[e._v(" "+e._s(e.userInfoAll.user_info.username)+" ")]),e._m(0)]),e._m(1),t("div",{staticClass:"f-12 m-t-5"},[e._v("ip\u5C5E\u5730\uFF1A\u56DB\u5DDD\u7701")]),t("div",{staticClass:"line m-t-10 m-b-10 bg-f5"}),t("div",{staticClass:"flex-wrap flex-center-wrap flex-justify-between f-12"},[e._m(2),t("div",e._l(5,function(a){return t("img",{key:a,staticClass:"w-20 h-20 b-r-50 m-l-10",attrs:{src:"//img-home.csdnimg.cn/images/20210114022831.png"}})}),0)]),e._m(3),e._m(4),t("div",{staticClass:"line m-t-10 m-b-10 bg-f5"}),e._l(e.userTags,function(a){return t("el-tag",{key:a._id,staticClass:"m-r-10 m-b-5"},[e._v(" "+e._s(a.tag_content)+" ")])}),t("div",{staticClass:"line m-t-10 bg-f5"})],2)},L=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex-wrap flex-center-wrap"},[t("p",{staticClass:"flex-center user-guan f-10 c-555 m-r-15"},[e._v("\u5173\u6CE8")]),t("p",{staticClass:"guan-icon-cover b-r-50 flex-center"},[t("i",{staticClass:"el-icon-chat-dot-square c-fff f-12 f-w-600"})])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"f-12 c-999 m-t-10"},[t("span",{staticClass:"f-500 f-16 c-555"},[e._v("23")]),e._v(" \u5173\u6CE8TA\u7684 \xA0\xA0 "),t("span",{staticClass:"f-500 f-16 c-555"},[e._v("0")]),e._v(" TA\u5173\u6CE8\u7684 ")])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex-wrap flex-center-wrap"},[t("img",{staticClass:"w-20 h-20 b-r-50",attrs:{src:"//img-home.csdnimg.cn/images/20210114022831.png"}}),e._v("\xA0\u6211\u7684\u52CB\u7AE0 ")])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex-wrap flex-center-wrap f-12"},[t("img",{staticClass:"w-20 h-20 b-r-50",attrs:{src:"//img-home.csdnimg.cn/images/20210114022831.png"}}),e._v(" \xA0\u7801\u9F845\u5E74 ")])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex-wrap flex-center-wrap f-12"},[t("img",{staticClass:"w-20 h-20 b-r-50",attrs:{src:"//img-home.csdnimg.cn/images/20210114022831.png"}}),e._v(" \xA0 240 \u539F\u521B\u6587\u7AE0"),t("span",{staticClass:"dor-center"}),e._v(" 27 \u70B9\u8D5E"),t("span",{staticClass:"dor-center"}),e._v(" 7 \u8BC4\u8BBA"),t("span",{staticClass:"dor-center"}),e._v(" 48 \u6536\u85CF ")])}];const F={props:{userInfoAll:{type:Object,default:()=>{}}},data(){return{isShowId:!1,tags:["\u524D\u7AEF","vue","react","node"]}},computed:{...Vuex.mapState(["userTags"])},methods:{}},m={};var D=i(F,j,L,!1,R,"610ef60f",null,null);function R(e){for(let s in m)this[s]=m[s]}var M=function(){return D.exports}(),G=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("kl-scroll",{staticClass:"p-l-10 p-r-10",attrs:{list:e.historyList,scrollHeight:e.scrollHeight},on:{bottom:e.bottomEvent}},[e._v(" history ")])},U=[];const q={props:{scrollHeight:{type:Number,default:500}},data(){return{historyList:[]}},methods:{init(){},bottomEvent(){}}},v={};var V=i(q,G,U,!1,B,null,null,null);function B(e){for(let s in v)this[s]=v[s]}var N=function(){return V.exports}(),z=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("kl-scroll",{staticClass:"p-l-10 p-r-10",attrs:{pageOption:e.pageOption,list:e.historyList,scrollHeight:e.scrollHeight},on:{bottom:e.bottomEvent}},e._l(e.list,function(a){return t("div",{key:a._id,staticClass:"item"},[t("div",{staticClass:"flex-wrap"},[t("div",{staticClass:"label-item"},[e._v("\u65F6\u95F4\uFF1A")]),t("div",{staticClass:"label-content"},[e._v(" "+e._s(e.klDateFormat(a.bug_updata_time))+" ")])]),t("div",{staticClass:"flex-wrap m-t-10"},[t("div",{staticClass:"label-item"},[e._v("\u6B21\u6570\uFF1A")]),t("div",{staticClass:"label-content"},[e._v(" "+e._s(a.bug_number)+" ")])]),t("div",{staticClass:"flex-wrap m-t-10"},[t("div",{staticClass:"label-item"},[e._v("\u7C7B\u578B\uFF1A")]),t("div",{staticClass:"label-content"},[e._v(" "+e._s(e.getBugType(a.bug_type))+" ")])]),t("div",{staticClass:"flex-wrap m-t-10"},[t("div",{staticClass:"label-item"},[e._v("\u5185\u5BB9\uFF1A")]),t("div",{staticClass:"c-danger"},[e._v(" "+e._s(a.bug_content)+" ")])])])}),0)},P=[];const J={props:{scrollHeight:{type:Number,default:500}},data(){return{historyList:[],pageOption:{pgae:1,limit:100,total:0},list:[]}},computed:{...Vuex.mapState(["options"]),bugOptionsList(){return this.options.bugTypeOptions||[]}},mounted(){this.init()},methods:{getBugType(e){let s=this.bugOptionsList.find(t=>t.value==e);if(!!s)return s.label},init(){this.pageOption.page=1,this.getList()},getList(){let{limit:e,page:s}=this.pageOption,t={limit:e,page:s,cache:!0};b.get_note_bug_apis(t).then(a=>{let{data:r,total:l}=a.data;Array.isArray(r)&&(this.list=[...this.list,...r],this.pageOption.total=l)}).catch(a=>{}).finally(()=>{})},bottomEvent(){let{limit:e,page:s,total:t}=this.pageOption;e*s>=t||(this.pageOption.page++,this.getList())}}},f={};var K=i(J,z,P,!1,Q,"be168580",null,null);function Q(e){for(let s in f)this[s]=f[s]}var W=function(){return K.exports}(),X=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("div",{staticClass:"flex-wrap",attrs:{id:"scroll-top"}},[t("kl-nav",{attrs:{rightNum:15,active:e.active,list:e.navList},on:{change:e.navChange}}),t("i",{staticClass:"el-icon-search f-18 m-l-15 m-t-10"})],1),t("v-swiper",{ref:"swiper",attrs:{duration:e.duration},on:{change:e.swiperChange},model:{value:e.active,callback:function(a){e.active=a},expression:"active"}},[t("van-swipe-item",[t("bugList",{attrs:{scrollHeight:e.scrollHeight}})],1),t("van-swipe-item",[t("historyList",{attrs:{scrollHeight:e.scrollHeight}})],1),t("van-swipe-item",[e._v(" 3 ")]),t("van-swipe-item",[e._v(" 4 ")])],1)],1)},Y=[];const Z={components:{historyList:N,bugList:W},props:{userInfoAll:{type:Object,default:()=>{user_info}}},data(){return{scrollHeight:500,duration:300,pageOption:{page:1,limit:10,total:0},navList:[{value:"1",label:"bug\u8BB0\u5F55"},{value:"2",label:"\u6211\u7684\u535A\u5BA2"},{value:"3",label:"\u6536\u85CF\u5217\u8868"},{value:"4",label:"\u9519\u8BEF\u65E5\u5FD7"}],active:"1"}},mounted(){this.setscrollHeight()},methods:{async setscrollHeight(){await this.$nextTick();let e=document.documentElement.clientHeight||667;this.scrollHeight=e-80},swiperChange(e){this.active=e+1+""},async navChange(e){e!==this.active&&(this.list=[],this.pageOption=Object.assign(this.pageOption,{page:1,limit:10,total:0})),this.active=e,this.duration=0,this.$refs.swiper.swipeTo(e-1),setTimeout(()=>{this.duration=300},50)}}},d={};var ee=i(Z,X,Y,!1,te,"23842662",null,null);function te(e){for(let s in d)this[s]=d[s]}var se=function(){return ee.exports}(),ae=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"user-avtor-bg pr",style:{backgroundImage:`url(${e.userInfoAll.user_info.header_img})`}},[t("div",{staticClass:"p-a h-vh-100 w-vw-100"},[t("div",{staticClass:"no-bar h-vh-100 user-avtor-bg-y-scroll bg-cover11"},[t("div",{staticClass:"h-100"}),t("div",{staticClass:"p-l-15 p-r-15 user-info-main bg-fff"},[t("userCenterHeader",{ref:"userCenterHeaderRef",attrs:{userInfoAll:e.userInfoAll}}),t("userCenterBaseInfo",{attrs:{userInfoAll:e.userInfoAll}}),t("userCenterTabs",{attrs:{userInfoAll:e.userInfoAll}}),t("kl-back-top",{attrs:{el:".zl-scroll"}})],1)])])])},re=[];const ie={components:{userCenterHeader:T,userCenterBaseInfo:M,userCenterTabs:se,scrollHeight:0},data(){return{isMe:!1,userId:"",userInfo:{},pageScrollTop:0,userInfoAll:{user_info:{}}}},computed:{...Vuex.mapState(["userdata"]),isMe(){return this.getType(this.userdata)=="object"&&this.userdata._id?this.userId==this.userdata._id:!1}},created(){this.init()},mounted(){this.scrollEvent()},methods:{scrollEvent(){let e=this,s=document.querySelector(".user-avtor-bg-y-scroll");!s||s.addEventListener("scroll",function(){let t=document.querySelector("#scroll-top");if(!t)return;let a=t.getBoundingClientRect().top,r=e.$refs.userCenterHeaderRef;!r||(a<50?r.isShow=!0:r.isShow=!1)})},klScrollEvent(e){this.pageScrollTop=e},handlerUserinfo(){let{query:{user_id:e}}=this.$route,{_id:s}=this.userdata,t=e||s;if(!t)return this.$router.replace({path:"/login"}),this.$message.error("\u8BF7\u767B\u5F55");this.userId=t},init(){this.scrollHeight=document.documentElement.clientHeight||0,this.handlerUserinfo(),this.getUserInfo()},getUserInfo(){let{userId:e}=this;e&&b.get_mobile_user_info({watch_user_id:e}).then(s=>{this.userInfoAll=s.data,this.userInfoAll.user_info.header_img=this.parseResourceUrl(this.userInfoAll.user_info.header_img)}).catch(()=>{})}}},h={};var le=i(ie,ae,re,!1,ne,"aa572354",null,null);function ne(e){for(let s in h)this[s]=h[s]}var oe=function(){return le.exports}(),ce=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"demo"},[t(e.page,{tag:"component"})],1)},_e=[];const ue={components:{pc:S,mobile:oe},computed:{page(){return this.isPc()?"pc":"mobile"}}},g={};var pe=i(ue,ce,_e,!1,me,null,null,null);function me(e){for(let s in g)this[s]=g[s]}var fe=function(){return pe.exports}();export{fe as default};
