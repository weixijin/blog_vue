import{n as o}from"./index.25833e42.js";var n=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"el-select-paging-loading"},[a("el-select",{attrs:{disabled:!(e.disabled===!1||e.disabled===void 0),value:e.value,filterable:!e.selectConfig.isfilter,remote:!0,clearable:!e.selectConfig.clearable,multiple:!!e.selectConfig.isMuli,placeholder:e.selectConfig.placeholder,"remote-method":e.remoteMethod,"no-data-text":e.obj.loadingText},on:{change:e.changeValue,focus:e.focusfn}},[e.selectConfig.needSlot?a("div",{ref:"scrollTest",staticClass:"pagingLoad"},e._l(e.obj.dataList,function(t,i){return a("el-option",{key:i,attrs:{label:t[e.selectConfig.optionLabel],value:t[e.selectConfig.optionValue]}},[a("span",{staticStyle:{float:"left"}},[e._v(" "+e._s(t[e.selectConfig.slotLabelObj.slotLeftLabel])+" ")]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(" "+e._s(t[e.selectConfig.slotLabelObj.slotRightLabel])+" ")])])}),1):a("div",{ref:"scrollTest",staticClass:"pagingLoad"},e._l(e.obj.dataList,function(t,i){return a("el-option",{key:i,attrs:{label:t[e.selectConfig.optionLabel],value:t[e.selectConfig.optionValue]}})}),1)])],1)},c=[];const r={name:"PagingSelectComp",props:["selectConfig","value","selectText","disabled","searchValue","parentId","isNeedObj"],data(){return{text:"",defaultPagingVal:30,obj:{scrollFlag:!0,isFetch:1,pageNum:1,totalPages:0,pageSize:this.selectConfig.size||50,parentId:this.parentId,dataList:[],loadingText:"\u52A0\u8F7D\u4E2D\u3002\u3002\u3002",simpleName:""}}},watch:{parentId(e,s){e?(this.obj.dataList=[],this.obj.parentId=e,this.selectConfig.apiHandle(this.obj)):(this.obj.dataList=[],this.obj.parentId=null,this.$emit("selectText",""),this.$emit("input",""))},value(e,s){const a=[];this.obj.dataList.map(t=>{this.selectConfig.isMuli?e.indexOf(t[this.selectConfig.optionValue])>-1&&a.push(t[this.selectConfig.optionLabel]):t[this.selectConfig.optionValue]===e&&(a.push(t[this.selectConfig.optionLabel]),this.isNeedObj&&this.$emit("selectObj",t))}),this.$emit("selectText",a.join(","))}},mounted(){this.setSearchCondition(),this.getSelectPagingData(),this.scrollHandle()},methods:{getSelectPagingData(){this.selectConfig.apiHandle(this.obj)},changeValue(e){const s=typeof this.value;this.obj.simpleName="",e===""?(this.obj.pageNum=1,this.obj.dataList=[],this.$emit("selectText",""),s==="number"?this.$emit("input",null):this.$emit("input",""),this.isNeedObj&&this.$emit("selectObj",{}),this.getSelectPagingData()):this.$emit("input",e),this.$emit("changeValue",e)},remoteMethod(e){this.obj.pageNum=1,this.obj.dataList=[],this.obj.simpleName=e,this.getSelectPagingData()},focusfn(){this.obj.loadingText==="\u65E0\u6570\u636E"&&(this.obj.loadingText="\u52A0\u8F7D\u4E2D\u3002\u3002\u3002",this.remoteMethod(""))},scrollHandle(){const e=this,s=this.$refs.scrollTest;s.parentNode.parentNode.addEventListener("scroll",()=>{if(e.obj.pageNum>=e.obj.totalPages)return;if(s.parentNode.parentNode.parentNode.className!=="el-scrollbar")return!1;const a=s.offsetHeight,t=s.parentNode.parentNode.offsetHeight;s.parentNode.parentNode.scrollTop>=a-t-e.defaultPagingVal&&e.obj.scrollFlag&&(e.obj.scrollFlag=!1,this.obj.pageNum++,this.getSelectPagingData())},!0)},setSearchCondition(){this.obj.simpleName=this.searchValue?this.searchValue:""}}},l={};var h=o(r,n,c,!1,g,"47082a87",null,null);function g(e){for(let s in l)this[s]=l[s]}var f=function(){return h.exports}();export{f as default};
